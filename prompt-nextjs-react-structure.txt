# ğŸ¯ Má»¥c tiÃªu
Táº¡o cáº¥u trÃºc dá»± Ã¡n Next.js (phiÃªn báº£n má»›i nháº¥t, App Router) nhÆ°ng váº«n giá»¯ nguyÃªn triáº¿t lÃ½ tá»• chá»©c thÆ° má»¥c nhÆ° má»™t dá»± Ã¡n React thuáº§n (giá»‘ng hÃ¬nh dÆ°á»›i Ä‘Ã¢y):

src/
â”œâ”€â”€ apis/
â”œâ”€â”€ assets/
â”œâ”€â”€ components/
â”œâ”€â”€ constants/
â”œâ”€â”€ contexts/
â”œâ”€â”€ hooks/
â”œâ”€â”€ layouts/
â”œâ”€â”€ lib/
â”œâ”€â”€ pages/
â”œâ”€â”€ routes/
â”œâ”€â”€ store/
â”œâ”€â”€ theme/
â”œâ”€â”€ types/
â”œâ”€â”€ utils/
â””â”€â”€ App.tsx

App sáº½ lÃ  giao diá»‡n cha, cÃ¡c `pages` lÃ  con, vÃ  cÃ¡c route Ä‘Æ°á»£c chia thÃ nh file riÃªng trong `src/routes/`.

---

# âš™ï¸ Cáº¥u trÃºc chi tiáº¿t

src/
â”œâ”€â”€ apis/
â”‚   â”œâ”€â”€ axiosInstance.ts
â”‚   â”œâ”€â”€ user.api.ts
â”‚   â””â”€â”€ product.api.ts
â”‚
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ icons/
â”‚   â””â”€â”€ styles/
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ProtectedRoute/ProtectedRoute.component.tsx
â”‚   â”œâ”€â”€ Navbar/Navbar.component.tsx
â”‚   â”œâ”€â”€ Sidebar/Sidebar.component.tsx
â”‚   â”œâ”€â”€ Loader/Loader.component.tsx
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ Button.tsx
â”‚       â””â”€â”€ Input.tsx
â”‚
â”œâ”€â”€ constants/
â”‚   â”œâ”€â”€ paths.ts
â”‚   â”œâ”€â”€ config.ts
â”‚   â””â”€â”€ roles.ts
â”‚
â”œâ”€â”€ contexts/
â”‚   â”œâ”€â”€ AuthContext.tsx
â”‚   â”œâ”€â”€ ThemeContext.tsx
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”œâ”€â”€ useFetch.ts
â”‚   â”œâ”€â”€ useLocalStorage.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ layouts/
â”‚   â”œâ”€â”€ DashboardLayout/
â”‚   â”‚   â””â”€â”€ DashboardLayout.component.tsx
â”‚   â”œâ”€â”€ SidebarLayout/
â”‚   â”‚   â””â”€â”€ SidebarLayout.component.tsx
â”‚   â””â”€â”€ PublicLayout/
â”‚       â””â”€â”€ PublicLayout.component.tsx
â”‚
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ utils.ts
â”‚
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Home/Home.page.tsx
â”‚   â”œâ”€â”€ Login/Login.page.tsx
â”‚   â”œâ”€â”€ Dashboard/Dashboard.page.tsx
â”‚   â”œâ”€â”€ ProductDetail/ProductDetail.page.tsx
â”‚   â”œâ”€â”€ ProductDetail/components/General/General.component.tsx
â”‚   â”œâ”€â”€ Report/Report.page.tsx
â”‚   â”œâ”€â”€ Settings/SystemSettings.page.tsx
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ index.tsx                 # Import vÃ  merge cÃ¡c router con
â”‚   â”œâ”€â”€ Auth.routes.tsx           # CÃ¡c route public (login, register)
â”‚   â”œâ”€â”€ Dashboard.routes.tsx      # CÃ¡c route trong DashboardLayout
â”‚   â”œâ”€â”€ Product.routes.tsx        # CÃ¡c route cho module sáº£n pháº©m
â”‚   â””â”€â”€ Report.routes.tsx
â”‚
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ auth.store.ts
â”‚   â”œâ”€â”€ product.store.ts
â”‚   â””â”€â”€ ui.store.ts
â”‚
â”œâ”€â”€ theme/
â”‚   â”œâ”€â”€ globals.css
â”‚   â”œâ”€â”€ tailwind.config.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ user.d.ts
â”‚   â”œâ”€â”€ product.d.ts
â”‚   â””â”€â”€ global.d.ts
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ formatDate.ts
â”‚   â”œâ”€â”€ logger.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ App.tsx
â”œâ”€â”€ middleware.ts
â””â”€â”€ page.tsx

---

# ğŸ§© YÃªu cáº§u code

## App.tsx
- LÃ  entry point chÃ­nh (giá»‘ng _app.tsx cá»§a Next.js nhÆ°ng viáº¿t theo kiá»ƒu React).
- Chá»©a `Routes` Ä‘Æ°á»£c import tá»« `src/routes/index.tsx`.
- DÃ¹ng `<Suspense>` Ä‘á»ƒ lazy load page.
- CÃ³ thá»ƒ import global CSS, theme, provider.

## routes/index.tsx
- Import vÃ  káº¿t há»£p cÃ¡c route con:
  ```tsx
  import { AuthRoutes } from './Auth.routes';
  import { DashboardRoutes } from './Dashboard.routes';
  import { ProductRoutes } from './Product.routes';

  export const AppRoutes = () => (
    <>
      {AuthRoutes()}
      {DashboardRoutes()}
      {ProductRoutes()}
    </>
  );
  ```

## routes/Dashboard.routes.tsx
- Chá»©a route group cÃ³ layout `DashboardLayout`:
  ```tsx
  import { Route } from 'react-router-dom';
  import ProtectedRoute from '@/components/ProtectedRoute/ProtectedRoute.component';
  import DashboardLayout from '@/layouts/DashboardLayout/DashboardLayout.component';
  import { PATHS } from '@/constants/paths';
  import FrmMain from '@/pages/FrmMain/FrmMain.page';
  import TongHop from '@/pages/TongHop/TongHop.page';

  export const DashboardRoutes = () => (
    <Route element={<ProtectedRoute><DashboardLayout /></ProtectedRoute>}>
      <Route path={PATHS.DASHBOARD} element={<FrmMain />} />
      <Route path={PATHS.TONG_HOP} element={<TongHop />} />
    </Route>
  );
  ```

## constants/paths.ts
- Äá»‹nh nghÄ©a táº¥t cáº£ route path:
  ```ts
  export const PATHS = {
    HOME: '/',
    LOGIN: '/login',
    DASHBOARD: '/dashboard',
    TONG_HOP: '/tong-hop',
    PRODUCTS: '/products',
    REPORT: '/report',
    SETTINGS: '/settings',
    NOT_FOUND: '/not-found',
  };
  ```

## middleware.ts
- DÃ¹ng Ä‘á»ƒ báº£o vá»‡ route trong Next.js (náº¿u ngÆ°á»i dÃ¹ng chÆ°a Ä‘Äƒng nháº­p thÃ¬ redirect):
  ```ts
  import { NextResponse } from 'next/server';
  import type { NextRequest } from 'next/server';

  export function middleware(req: NextRequest) {
    const token = req.cookies.get('token')?.value;
    const protectedPaths = ['/dashboard', '/products', '/report'];

    if (protectedPaths.some((p) => req.nextUrl.pathname.startsWith(p)) && !token) {
      return NextResponse.redirect(new URL('/login', req.url));
    }

    return NextResponse.next();
  }

  export const config = {
    matcher: ['/dashboard/:path*', '/products/:path*', '/report/:path*'],
  };
  ```

---

# âœ… Output mong muá»‘n

1. ToÃ n bá»™ cáº¥u trÃºc thÆ° má»¥c nhÆ° trÃªn (giá»‘ng hÃ¬nh React project).
2. Code máº«u sáºµn sÃ ng cháº¡y Ä‘Æ°á»£c trong Next.js.
3. App.tsx hoáº¡t Ä‘á»™ng nhÆ° component cha, routes chia nhá» theo page.
4. CÃ³ thá»ƒ lazy load cÃ¡c page.
5. Há»— trá»£ báº£o vá»‡ route (ProtectedRoute + middleware).

---

# âš¡ Lá»‡nh khá»Ÿi táº¡o

Táº¡o project:
```
npx create-next-app@latest webadmin --typescript --app --src-dir
```

Sau Ä‘Ã³ dÃ¡n cáº¥u trÃºc vÃ  code trÃªn vÃ o thÆ° má»¥c `src/`.

---

# ğŸ”¥ Má»¥c tiÃªu
Káº¿t há»£p sá»©c máº¡nh cá»§a Next.js App Router vá»›i sá»± rÃµ rÃ ng cá»§a kiáº¿n trÃºc React module hÃ³a.  
App lÃ  giao diá»‡n cha, pages lÃ  con, routes Ä‘Æ°á»£c chia nhá» â€” giÃºp quáº£n lÃ½ code dá»… hÆ¡n vÃ  má»Ÿ rá»™ng linh hoáº¡t.
